import{e as u}from"./index.modern.d96712a8.js";import{n as p,p as a}from"./Swup.90c12983.js";function c(){return c=Object.assign?Object.assign.bind():function(e){for(var o=1;o<arguments.length;o++){var t=arguments[o];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},c.apply(this,arguments)}let d=class{constructor(o){this._raf=null,this._positionY=0,this._velocityY=0,this._targetPositionY=0,this._targetPositionYWithOffset=0,this._direction=0,this.scrollTo=t=>{if(t&&t.nodeType)this._targetPositionY=Math.round(t.getBoundingClientRect().top+window.pageYOffset);else{if(parseInt(this._targetPositionY)!==this._targetPositionY)return void console.error("Argument must be a number or an element.");this._targetPositionY=Math.round(t)}this._targetPositionY>document.documentElement.scrollHeight-window.innerHeight&&(this._targetPositionY=document.documentElement.scrollHeight-window.innerHeight),this._positionY=document.body.scrollTop||document.documentElement.scrollTop,this._direction=this._positionY>this._targetPositionY?-1:1,this._targetPositionYWithOffset=this._targetPositionY+this._direction,this._velocityY=0,this._positionY!==this._targetPositionY?(this.options.onStart(),this._animate()):this.options.onAlreadyAtPositions()},this._animate=()=>{this._update(),this._render(),this._direction===1&&this._targetPositionY>this._positionY||this._direction===-1&&this._targetPositionY<this._positionY?(this._raf=requestAnimationFrame(this._animate),this.options.onTick()):(this._positionY=this._targetPositionY,this._render(),this._raf=null,this.options.onTick(),this.options.onEnd())},this._update=()=>{const t=this._targetPositionYWithOffset-this._positionY;return this._velocityY+=t*this.options.acceleration,this._velocityY*=this.options.friction,this._positionY+=this._velocityY,Math.abs(t)},this._render=()=>{window.scrollTo(0,this._positionY)},this.options=c({},{onAlreadyAtPositions:()=>{},onCancel:()=>{},onEnd:()=>{},onStart:()=>{},onTick:()=>{},friction:.7,acceleration:.04},o),o&&o.friction&&(this.options.friction=1-o.friction),window.addEventListener("mousewheel",t=>{this._raf&&(this.options.onCancel(),cancelAnimationFrame(this._raf),this._raf=null)},{passive:!0})}};function h(){return h=Object.assign?Object.assign.bind():function(e){for(var o=1;o<arguments.length;o++){var t=arguments[o];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},h.apply(this,arguments)}class w extends u{constructor(o={}){super(),this.name="SwupScrollPlugin",this.requires={swup:">=4.2.0"},this.scrl=void 0,this.defaults={doScrollingRightAway:!1,animateScroll:{betweenPages:!0,samePageWithHash:!0,samePage:!0},scrollFriction:.3,scrollAcceleration:.04,getAnchorElement:void 0,offset:0,scrollContainers:"[data-swup-scroll-container]",shouldResetScrollPosition:()=>!0},this.options=void 0,this.cachedScrollPositions={},this.previousScrollRestoration=void 0,this.currentCacheKey=void 0,this.getAnchorElement=(t="")=>typeof this.options.getAnchorElement=="function"?this.options.getAnchorElement(t):this.swup.getAnchorElement(t),this.getOffset=t=>t?typeof this.options.offset=="function"?parseInt(String(this.options.offset(t)),10):parseInt(String(this.options.offset),10):0,this.handleScrollToTop=()=>{var t,s;return(t=(s=this.swup).scrollTo)==null||t.call(s,0,this.shouldAnimate("samePage")),!0},this.handleScrollToAnchor=(t,{hash:s})=>this.maybeScrollToAnchor(s,this.shouldAnimate("samePageWithHash")),this.onVisitStart=t=>{this.maybeResetScrollPositions(t),this.cacheScrollPositions(t.from.url);const s=t.scroll.target||t.to.hash;t.scroll.scrolledToContent=!1,this.options.doScrollingRightAway&&!s&&(t.scroll.scrolledToContent=!0,this.doScrollingBetweenPages(t))},this.onScrollToContent=t=>{t.scroll.scrolledToContent||this.doScrollingBetweenPages(t),this.restoreScrollContainers(t.to.url)},this.doScrollingBetweenPages=t=>{var s;if(t.history.popstate&&!t.animation.animate||this.maybeScrollToAnchor(t.scroll.target||t.to.hash,this.shouldAnimate("betweenPages"))||!t.scroll.reset)return;const i=this.getCachedScrollPositions(this.swup.resolveUrl(p())),n=(i==null||(s=i.window)==null?void 0:s.top)||0;requestAnimationFrame(()=>{var r,l;return(r=(l=this.swup).scrollTo)==null?void 0:r.call(l,n,this.shouldAnimate("betweenPages"))})},this.maybeResetScrollPositions=t=>{const{url:s}=t.to,{el:i}=t.trigger;i&&this.options.shouldResetScrollPosition(i)&&this.resetScrollPositions(s)},this.options=h({},this.defaults,o)}mount(){const o=this.swup;o.hooks.create("scroll:start"),o.hooks.create("scroll:end"),this.scrl=new d({onStart:()=>o.hooks.callSync("scroll:start"),onEnd:()=>o.hooks.callSync("scroll:end"),onCancel:()=>o.hooks.callSync("scroll:end"),friction:this.options.scrollFriction,acceleration:this.options.scrollAcceleration}),o.scrollTo=(t,s=!0)=>{s?this.scrl.scrollTo(t):(o.hooks.callSync("scroll:start"),window.scrollTo(0,t),o.hooks.callSync("scroll:end"))},this.previousScrollRestoration=window.history.scrollRestoration,o.options.animateHistoryBrowsing&&(window.history.scrollRestoration="manual"),this.on("visit:start",this.onVisitStart),this.replace("content:scroll",this.onScrollToContent),this.replace("scroll:top",this.handleScrollToTop),this.replace("scroll:anchor",this.handleScrollToAnchor)}unmount(){super.unmount(),this.previousScrollRestoration&&(window.history.scrollRestoration=this.previousScrollRestoration),this.cachedScrollPositions={},delete this.swup.scrollTo,delete this.scrl}shouldAnimate(o){return typeof this.options.animateScroll=="boolean"?this.options.animateScroll:this.options.animateScroll[o]}maybeScrollToAnchor(o,t=!1){var s,i;if(!o)return!1;const n=this.getAnchorElement(o);if(!n)return console.warn(`Anchor target ${o} not found`),!1;if(!(n instanceof Element))return console.warn(`Anchor target ${o} is not a DOM node`),!1;const{top:r}=n.getBoundingClientRect(),l=r+window.scrollY-this.getOffset(n);return(s=(i=this.swup).scrollTo)==null||s.call(i,l,t),!0}cacheScrollPositions(o){const t=a(this.options.scrollContainers).map(i=>({top:i.scrollTop,left:i.scrollLeft})),s={window:{top:window.scrollY,left:window.scrollX},containers:t};this.cachedScrollPositions[o]=s}resetScrollPositions(o){const t=this.swup.resolveUrl(o);delete this.cachedScrollPositions[t]}getCachedScrollPositions(o){const t=this.swup.resolveUrl(o);return this.cachedScrollPositions[t]}restoreScrollContainers(o){const t=this.getCachedScrollPositions(o);t&&t.containers.length!==0&&a(this.options.scrollContainers).forEach((s,i)=>{const n=t.containers[i];n!=null&&(s.scrollTop=n.top,s.scrollLeft=n.left)})}}export{w as default};
